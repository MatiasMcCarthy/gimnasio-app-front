<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <div class="logo-container">
        <div class="login-logo">
          <img src="logo.png" alt="BurGymSports Logo" class="login-image-logo">
        </div>
      </div>
      <div class="login-title">
        {{ isRegister ? 'Registrarse' : 'Iniciar Sesión' }}
      </div>
    </div>

    <form (ngSubmit)="onSubmit()" class="login-form">
      <!-- Username -->
      <div class="form-group">
        <label for="username">Usuario</label>
        <input type="text" id="username" [(ngModel)]="formData.username" name="username" required>
      </div>
      
      <!-- Password -->
      <div class="form-group">
        <label for="password">Contraseña</label>
        <input type="password" id="password" [(ngModel)]="formData.password" name="password" required>
      </div>

      <!-- Campos extra solo en registro -->
      <div *ngIf="isRegister">
        <div class="form-group">
          <label for="confirmPassword">Confirmar Contraseña</label>
          <input type="password" id="confirmPassword" [(ngModel)]="formData.confirmPassword" name="confirmPassword" required>
        </div>

        <div class="form-group">
          <label for="rol">Rol</label>
          <select id="rol" [(ngModel)]="formData.rol" name="rol" required>
            <option value="cliente">Cliente</option>
            <option value="entrenador">Entrenador</option>
          </select>
        </div>

        <div class="form-group">
          <label for="fotoPerfil">Foto de Perfil (opcional)</label>
          <input type="file" id="fotoPerfil" (change)="onFileSelected($event)">
        </div>
      </div>

      <div class="link-container" *ngIf="!isRegister">
        <a routerLink="/forgot-password">¿Olvidaste tu contraseña?</a>
      </div>

      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <button type="submit" class="login-button">
        {{ isRegister ? 'Registrarse' : 'Ingresar' }}
      </button>
    </form>

    <!-- Link de registro solo visible si el admin está logueado -->
    <div class="link-container" *ngIf="currentUser?.idRol === 'admin'">
      <a href="#" (click)="toggleMode($event)">
        {{ isRegister ? '¿Ya tienes cuenta? Inicia sesión' : '¿No tienes cuenta? Regístrate' }}
      </a>
    </div>
  </div>
</div>
